<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSS 3D Photo Sphere</title>
<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #111;
    overflow: hidden;
    font-family: sans-serif;
  }
  .hint {
    position: absolute;
    left: 12px;
    top: 12px;
    background: rgba(0,0,0,0.4);
    padding: 6px 10px;
    border-radius: 5px;
    color: #fff;
    font-size: 13px;
    z-index: 10;
  }
  .scene {
    width: 100vw;
    height: 100vh;
    perspective: 1200px;
    position: relative;
  }
  .sphere {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0; height: 0;
    transform-style: preserve-3d;
  }
  .sphere img {
    position: absolute;
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s;
  }
</style>
</head>
<body>

<div class="hint">拖拽旋转 · 滚轮缩放</div>
<div class="scene">
  <div class="sphere" id="sphere">
    <!-- 使用你的12张图片 -->
    <img src="1761885326952.jpg">
    <img src="1761885492079.jpg">
    <img src="1761885580077.jpg">
    <img src="1761885634304.jpg">
    <img src="mmexport1755532277585.jpg">
    <img src="mmexport1759643324343.jpg">
    <img src="mmexport1759643400112.jpg">
    <img src="mmexport1762657315556.jpg">
    <img src="mmexport1763200275486.jpg">
    <img src="mmexport1763200316221.jpg">
    <img src="mmexport1763200346550.jpg">
    <img src="mmexport1763200404166.jpg">
  </div>
</div>

<script>
const sphere = document.getElementById('sphere');
const images = sphere.querySelectorAll('img');
const radius = 250;

// 1. 均匀分布图片（伪球）
function fibonacciSphere(n, r){
  const points = [];
  const golden = Math.PI * (3 - Math.sqrt(5));
  for(let i=0;i<n;i++){
    const y = 1 - (i/(n-1))*2;
    const radiusAtY = Math.sqrt(1 - y*y);
    const theta = golden*i;
    const x = Math.cos(theta)*radiusAtY;
    const z = Math.sin(theta)*radiusAtY;
    points.push({x:x*r, y:y*r, z:z*r});
  }
  return points;
}
const points = fibonacciSphere(images.length, radius);
images.forEach((img,i)=>{
  const p = points[i];
  img.dataset.x = p.x;
  img.dataset.y = p.y;
  img.dataset.z = p.z;
  img.style.transform = `translate3d(${p.x}px, ${p.y}px, ${p.z}px)`;
});

// 2. 旋转控制
let rotX=0, rotY=0, dragging=false, lastX, lastY;
document.addEventListener('mousedown', e=>{
  dragging=true; lastX=e.clientX; lastY=e.clientY;
});
document.addEventListener('mouseup', ()=>dragging=false);
document.addEventListener('mousemove', e=>{
  if(!dragging) return;
  const dx = e.clientX-lastX;
  const dy = e.clientY-lastY;
  rotY += dx*0.3;
  rotX -= dy*0.3;
  rotX=Math.max(Math.min(rotX,90),-90);
  updateSphere();
  lastX=e.clientX; lastY=e.clientY;
});

// 3. 缩放
let scale=1;
document.addEventListener('wheel', e=>{
  e.preventDefault();
  scale += e.deltaY*-0.001;
  scale = Math.min(Math.max(0.5, scale), 2);
  updateSphere();
});

// 4. 更新位置
function updateSphere(){
  const radX = rotX*Math.PI/180;
  const radY = rotY*Math.PI/180;
  images.forEach(img=>{
    const x0=parseFloat(img.dataset.x);
    const y0=parseFloat(img.dataset.y);
    const z0=parseFloat(img.dataset.z);
    let x1 = x0*Math.cos(radY)-z0*Math.sin(radY);
    let z1 = x0*Math.sin(radY)+z0*Math.cos(radY);
    let y1 = y0*Math.cos(radX)-z1*Math.sin(radX);
    let z2 = y0*Math.sin(radX)+z1*Math.cos(radX);
    img.style.transform=`translate3d(${x1}px,${y1}px,${z2}px) scale(${scale})`;
  });
}

// 5. 自动旋转
function animate(){
  rotY += 0.05;
  updateSphere();
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
