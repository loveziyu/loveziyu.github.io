<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yuyu çš„æ—¥å† ğŸ“…</title>
  <style>
    body { margin: 0; padding: 0; font-family: "Microsoft YaHei", sans-serif; background: linear-gradient(135deg, #ffe6f0, #fff0f5); text-align: center; }
    h1 { margin-top: 30px; color: #ff4b8b; font-size: 2rem; text-shadow: 1px 1px 3px rgba(255,75,139,0.5); }
    .calendar { width: 90%; max-width: 500px; margin: 20px auto; background: #fff0f5; border-radius: 15px; box-shadow: 0 5px 15px rgba(255,105,180,0.4); padding: 20px; }
    .month-year { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .month-year button { background-color: #ff4b8b; color: white; border: none; padding: 5px 10px; border-radius: 10px; cursor: pointer; font-size: 16px; transition: transform 0.2s, box-shadow 0.2s; }
    .month-year button:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(255,105,180,0.5); }
    .month-year span { font-size: 1.5rem; font-weight: bold; color: #ff4b8b; }
    .weekdays, .days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
    .weekdays div { font-weight: bold; color: #ff4b8b; }
    .days div { background: #ffe6f0; padding: 10px 0; border-radius: 8px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; position: relative; }
    .days div:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(255,105,180,0.4); }
    .days .today { background: #ff4b8b; color: white; font-weight: bold; }
    .days .birthday::after { content: "ğŸ‚"; position: absolute; top: 5px; right: 5px; font-size: 16px; }
    .days .period::after { content: "ğŸ’—"; position: absolute; top: 5px; right: 5px; font-size: 16px; }
  </style>
</head>
<body>

<h1>Yuyu çš„æ—¥å† ğŸ“…</h1>

<div class="calendar">
  <div class="month-year">
    <button id="prevMonth">â¬…</button>
    <span id="monthYear"></span>
    <button id="nextMonth">â¡</button>
  </div>
  <div class="weekdays">
    <div>æ—¥</div><div>ä¸€</div><div>äºŒ</div><div>ä¸‰</div><div>å››</div><div>äº”</div><div>å…­</div>
  </div>
  <div class="days" id="days"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/js-calendar-converter@0.0.7/dist/calendar.min.js"></script>
<script>
  const calendar = window.calendar; // ä» calendar.js å¼•å…¥çš„å¯¹è±¡

  // Yuyu çš„å†œå†ç”Ÿæ—¥ï¼šå†œå† 12 æœˆåˆäºŒ (lunar month = 12, lunar day = 2)
  function getBirthday(year) {
    const solar = calendar.lunar2solar(year, 12, 2, false);
    // solar è¿”å›å¯¹è±¡ï¼Œä¾‹å¦‚ {cYear, cMonth, cDay, â€¦}
    return { month: solar.cMonth - 1, day: solar.cDay };
  }

  // é˜´ç»æœŸä¼°ç®—ï¼šå·²çŸ¥ä¸Šæ¬¡å§¨å¦ˆ 2025-11-06 åˆ° 2025-11-10ï¼Œ28 å¤©å‘¨æœŸï¼ŒæŒç»­ 5 å¤©
  function getPeriods(year) {
    const periods = [];
    const lastStart = new Date(2025, 10, 6); // 11æœˆæ˜¯ month=10
    const cycle = 28;
    const duration = 5;
    let start = new Date(lastStart);

    while (start.getFullYear() <= year) {
      for (let i = 0; i < duration; i++) {
        const d = new Date(start);
        d.setDate(d.getDate() + i);
        if (d.getFullYear() === year) {
          periods.push(d);
        }
      }
      start.setDate(start.getDate() + cycle);
    }
    return periods;
  }

  const monthNames = ["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"];
  const today = new Date();
  let currentMonth = today.getMonth();
  let currentYear = today.getFullYear();

  const monthYearEl = document.getElementById("monthYear");
  const daysContainer = document.getElementById("days");

  function renderCalendar(month, year) {
    monthYearEl.textContent = `${monthNames[month]} ${year}`;
    daysContainer.innerHTML = "";

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    const birthday = getBirthday(year);
    const periods = getPeriods(year);

    // ç©ºç™½æ ¼
    for (let i = 0; i < firstDay; i++) {
      daysContainer.appendChild(document.createElement("div"));
    }

    for (let d = 1; d <= daysInMonth; d++) {
      const dayDiv = document.createElement("div");
      dayDiv.textContent = d;
      const thisDate = new Date(year, month, d);

      // ä»Šå¤©
      if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
        dayDiv.classList.add("today");
      }

      // ç”Ÿæ—¥ (å†œå†)
      if (d === birthday.day && month === birthday.month) {
        dayDiv.classList.add("birthday");
      }

      // é¢„æµ‹å§¨å¦ˆæœŸ
      periods.forEach(p => {
        if (p.getDate() === d && p.getMonth() === month && p.getFullYear() === year) {
          dayDiv.classList.add("period");
        }
      });

      dayDiv.onclick = () => {
        alert(`ä½ ç‚¹å‡»äº† ${year}-${month+1}-${d}`);
      };

      daysContainer.appendChild(dayDiv);
    }
  }

  document.getElementById("prevMonth").onclick = () => {
    currentMonth--;
    if (currentMonth < 0) {
      currentMonth = 11;
      currentYear--;
    }
    renderCalendar(currentMonth, currentYear);
  };

  document.getElementById("nextMonth").onclick = () => {
    currentMonth++;
    if (currentMonth > 11) {
      currentMonth = 0;
      currentYear++;
    }
    renderCalendar(currentMonth, currentYear);
  };

  renderCalendar(currentMonth, currentYear);

</script>

</body>
</html>
